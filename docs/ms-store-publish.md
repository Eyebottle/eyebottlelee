# 📦 Microsoft Store 출시용 리팩토링 체크리스트

**프로젝트명:** 아이보틀 진료 녹음기 & 자동 실행 매니저  
**목표:** 기존 데스크탑 앱을 Microsoft Store 정책에 맞게 구조, 보안, UX, 기능을 점검 및 개선하여 심사 통과 확률을 극대화한다.

---

## 1. 🔧 앱 구조 및 권한 점검

- [ ] 앱이 **표준 사용자 권한**에서 정상 동작하며 **UAC(관리자 권한)**을 요구하지 않는다.  
- [ ] 외부 EXE 설치, 드라이버 설치, 서비스 등록 등 **시스템 변경 동작이 없다.**  
- [ ] 레지스트리 접근, 방화벽 설정, OS 설정 변경 기능이 포함되지 않았다.  
- [ ] 외부 라이브러리 및 플러그인 라이선스가 모두 검증되었다.  
- [ ] MSIX 패키지 구조가 올바르고 필요한 **Capabilities**만 선언(`internetClient`, `runFullTrust` 등 최소화).

---

## 2. 🚀 시작 프로그램 및 자동 실행 기능

- [ ] `desktop:StartupTask`를 사용하여 **로그인 시 자동 실행**을 구현했고, **최초 실행 시 사용자 동의**를 받는다.  
- [ ] 자동 실행 기능은 **ON/OFF 토글**이 있으며 사용자가 **언제든 비활성화**할 수 있다.  
- [ ] 실행 대상 프로그램 목록을 **사용자가 직접 등록·수정**할 수 있다.  
- [ ] 실행 순서 및 지연 시간(예: 10초 간격) 설정이 가능하다.  
- [ ] 미설치 프로그램 발견 시 **예외 처리 및 알림 로직**이 구현되어 있다.

---

## 3. 🎤 진료 녹음 기능 점검

- [ ] 앱 실행 시 녹음 기능이 정상적으로 **시작·중지·저장**된다.  
- [ ] 마이크 접근 권한 요청 UI가 명확하며, 사용자가 동의하지 않아도 앱이 종료되지 않는다.  
- [ ] 녹음 데이터는 로컬 안전 경로(예: `%AppData%`)에 저장되며 **무단 접근이 차단**된다.  
- [ ] 녹음 파일의 명명 규칙, 보관 주기, 삭제 기능이 명확하다.  
- [ ] 클라우드 업로드 또는 외부 전송 기능이 있다면 **기본 OFF**로 설정된다.

---

## 4. 🧭 사용자 인터페이스(UI/UX)

- [ ] 주요 기능(녹음 / 자동 실행) 상태를 한눈에 볼 수 있는 **대시보드 UI**가 있다.  
- [ ] 자동 실행 설정(ON/OFF, 순서, 지연 시간, 목록)이 **명확하고 직관적**이다.  
- [ ] 사용자 동의 및 권한 요청(마이크, 자동실행 등)은 **명시적이고 충분한 설명**과 함께 표시된다.  
- [ ] 오류 발생 시 사용자에게 **알림 및 해결 방법**을 제공한다.  
- [ ] 다국어(한국어/영어) UI 지원을 고려했다. *(권장)*

---

## 5. 🔐 보안 및 개인정보 보호

- [ ] 개인정보(환자 정보 등)는 앱 내에서 **암호화** 저장되거나 저장되지 않는다.  
- [ ] 외부 전송, 로그 수집, 원격 서버 연결 기능은 있을 경우 **명시적 사용자 동의(Opt-in)**를 받는다.  
- [ ] **개인정보 처리방침(Privacy Policy)** 문서가 작성되어 있고, 스토어 등록 시 함께 제출할 수 있다.  
- [ ] 마이크, 파일 접근 등 민감 권한 사용 사유를 UI 또는 설명서에서 명확히 안내한다.

---

## 6. 📦 배포 및 스토어 정책 대응

- [ ] 앱 아이콘, 이름, 설명, 스크린샷, 버전 정보가 최신 상태다.  
- [ ] `publisher`(CN) 값이 MS 파트너 센터에서 지정한 값과 **정확히 일치**한다.  
- [ ] `identity_name`, `display_name` 등 MSIX 메타데이터가 변경 없이 유지된다.  
- [ ] 앱 설명에 자동 실행 기능이 **사용자 설정 기반**임을 명확히 기술했다.  
- [ ] 개인정보 처리방침 및 사용 약관 링크를 등록할 준비가 되었다.  
- [ ] **App Certification Kit (WACK)** 테스트를 통과했다.

---

## 7. 📊 QA 및 테스트

- [ ] Windows 10/11 환경에서 설치, 실행, 업데이트가 정상 동작한다.  
- [ ] 마이크 접근 거부, 자동 실행 OFF, 미설치 프로그램 등 **예외 시나리오** 테스트를 완료했다.  
- [ ] 자동 실행 기능의 동작 순서, 지연 시간, 사용자 설정 저장 여부를 확인했다.  
- [ ] 앱 제거 및 재설치 후에도 기능이 정상 동작한다.  
- [ ] App Installer를 통한 자동 업데이트가 정상 동작한다. *(선택 사항)*

---

## ✅ 최종 점검

- [ ] `flutter build windows --release` 및 `msix:create` 빌드 프로세스가 자동화되어 있다.  
- [ ] 서명용 인증서(`publisher`)가 스토어용과 일치하며 유효하다.  
- [ ] 기능, UI, 보안, 정책, 메타데이터 관련 **모든 항목이 완료**되었다.

---

📌 **권장 워크플로우**  
1. 위 체크리스트 기준으로 리팩토링  
2. WACK(App Certification Kit) 로컬 테스트  
3. MS 파트너 센터 등록 및 Private Audience 제출  
4. 피드백 반영 후 공개 버전 출시
