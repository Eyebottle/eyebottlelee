# 진료실 PC 배포 및 테스트 가이드

## 📦 배포 패키지 정보

**MSIX 패키지**: `medical_recorder.msix` (약 15MB)
**생성일**: 2025-09-27
**버전**: 1.1.0.0

## 🚀 설치 방법

### 방법 1: MSIX 패키지 설치 (권장)

1. **파일 복사**
   ```
   medical_recorder.msix 파일을 진료용 PC에 복사
   ```

2. **개발자 모드 활성화** (필수)
   - **방법 A**: Windows 설정
     - Windows 설정 (Win + I) → 업데이트 및 보안 → 개발자용
     - "개발자 모드" 선택
   - **방법 B**: 관리자 권한 CMD에서
     ```cmd
     reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\AppModelUnlock" /t REG_DWORD /f /v "AllowDevelopmentWithoutDevLicense" /d "1"
     reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\AppModelUnlock" /t REG_DWORD /f /v "AllowAllTrustedApps" /d "1"
     ```

3. **앱 설치**
   - `medical_recorder.msix` 파일 더블클릭
   - 인증서 경고가 나타나지만 "설치" 버튼 클릭
   - 설치 완료 후 시작 메뉴에서 "아이보틀 진료 녹음" 확인

### 방법 2: 직접 실행 방법 (MSIX 설치 실패 시)

> ⚠️ **MSIX 설치가 계속 실패하는 경우** (인증서 문제로 인해)

1. **Release 폴더 복사**
   ```
   C:\ws-workspace\eyebottlelee\build\windows\x64\runner\Release\ 폴더 전체를
   진료용 PC로 복사 (폴더명: medical_recorder)
   ```

2. **SmartScreen 경고 해결**
   - `medical_recorder.exe` 실행 시 "Windows의 PC 보호" 경고 발생
   - **"추가 정보"** 클릭 → **"실행"** 클릭
   - 또는 파일 우클릭 → 속성 → "차단 해제" 체크

3. **앱 실행**
   - `medical_recorder.exe` 실행
   - ✅ 핵심 기능 모두 정상 작동
   - ❌ Windows 시작 시 자동 실행 기능은 수동 설정 필요

### 2. 권한 설정

1. **마이크 권한**
   - Windows 설정 → 개인정보 → 마이크
   - "앱이 마이크에 액세스하도록 허용" 켜기
   - 앱 목록에서 "아이보틀 진료 녹음" 켜기

2. **파일 접근 권한**
   - OneDrive 폴더 접근 확인
   - 문서 폴더 쓰기 권한 확인

## ⚙️ 초기 설정

### 1. 앱 실행 및 기본 설정

1. **앱 시작**
   - 시작 메뉴에서 "아이보틀 진료 녹음" 실행
   - 자동 마이크 진단 완료 대기 (약 3초)

2. **진료 시간표 설정**
   - "설정" 탭 → "스케줄 설정" 클릭
   - 요일별 진료 시간 입력 (예: 월-금 9:00-18:00, 점심 12:00-13:00)
   - "저장" 버튼 클릭

3. **저장 폴더 설정**
   - "설정" 탭 → "저장 위치" 클릭
   - OneDrive 동기화 폴더 선택 권장
   - 예: `C:\\Users\\[사용자명]\\OneDrive\\진료녹음`

4. **추가 설정 (필요시)**
   - **녹음 품질**: 저장 공간에 따라 64/48/32kbps 선택
   - **VAD (음성 활동 감지)**: 무음 구간 자동 스킵 설정
   - **자동 실행**: Windows 시작 시 자동 실행 여부
   - **보관 기간**: 7일/1개월/3개월/영구 중 선택

## 🧪 사용성 테스트 체크리스트

### Phase 1: 기본 기능 테스트 (15분)

- [x] **앱 시작 확인** ✅ **완료** (2025-09-27 진료실 테스트)
  - [x] 앱이 정상적으로 시작되는가?
  - [x] SmartScreen 경고 우회 후 실행 성공

- [ ] **마이크 진단** 🔄 **마이크 없어서 보류**
  - [ ] 마이크 진단이 "정상" 상태를 표시하는가?
  - [ ] 볼륨 미터가 실시간으로 입력을 표시하는가?
  - > ⚠️ **마이크가 연결된 환경에서 테스트 필요**

- [ ] **수동 녹음 테스트** 🔄 **마이크 필요**
  - [ ] "녹음 시작" 버튼으로 녹음이 시작되는가?
  - [ ] 녹음 중 상태 표시가 정확한가?
  - [ ] "중지" 버튼으로 녹음이 정상 종료되는가?
  - [ ] 저장 폴더에 파일이 생성되는가?

- [ ] **파일 확인** 🔄 **녹음 후 가능**
  - [ ] 생성된 .m4a 파일이 재생되는가?
  - [ ] 음질이 적절한가?
  - [ ] 파일명에 날짜/시간이 포함되어 있는가?

- [ ] **마이크 없는 환경에서 가능한 테스트**
  - [ ] UI 요소들이 정상적으로 표시되는가?
  - [ ] 설정 메뉴 접근이 가능한가?
  - [ ] 스케줄 설정 기능이 작동하는가?
  - [ ] 저장 폴더 선택이 가능한가?
  - [ ] 도움말 다이얼로그가 정상 표시되는가?

### Phase 2: 자동화 기능 테스트 (30분)

- [ ] **스케줄 동기화**
  - [ ] 설정한 진료 시간에 자동으로 녹음이 시작되는가?
  - [ ] 점심시간에 자동으로 녹음이 중지되는가?
  - [ ] 오후 진료 시작 시 자동으로 재개되는가?
  - [ ] 진료 종료 시간에 자동으로 중지되는가?

- [ ] **시스템 트레이 기능**
  - [ ] 창을 닫으면 트레이로 숨겨지는가?
  - [ ] 트레이 아이콘 좌클릭으로 창이 복원되는가?
  - [ ] 우클릭 메뉴가 정상 작동하는가?
  - [ ] 트레이에서 녹음 시작/중지가 가능한가?

- [ ] **VAD (음성 활동 감지)**
  - [ ] 조용할 때 녹음이 일시정지되는가?
  - [ ] 대화 시작 시 자동으로 재개되는가?
  - [ ] VAD 설정 변경이 즉시 적용되는가?

### Phase 3: 안정성 테스트 (2-4시간)

- [ ] **장시간 녹음 테스트**
  - [ ] 2시간 연속 녹음이 안정적인가?
  - [ ] 10분 단위 파일 분할이 정상 작동하는가?
  - [ ] 메모리 사용량이 안정적인가?
  - [ ] 시스템 리소스에 과부하가 없는가?

- [ ] **재시작 테스트**
  - [ ] Windows 재시작 후 자동 실행되는가?
  - [ ] 설정이 유지되는가?
  - [ ] 이전 녹음 파일들이 그대로 있는가?

- [ ] **오류 상황 대응**
  - [ ] 마이크 연결 해제 시 적절한 알림이 표시되는가?
  - [ ] 디스크 공간 부족 시 경고가 표시되는가?
  - [ ] 예상치 못한 종료 후 재시작이 정상적인가?

## 📊 테스트 결과 수집

### 수집할 정보

1. **시스템 환경**
   - Windows 버전
   - 마이크 장치 정보
   - 저장 공간 크기

2. **성능 지표**
   - 메모리 사용량 (작업 관리자에서 확인)
   - CPU 사용률
   - 생성된 파일 크기 및 품질

3. **사용자 피드백**
   - 음질 만족도 (1-5점)
   - 사용 편의성 (1-5점)
   - 자동화 신뢰도 (1-5점)
   - 개선 요청 사항

### 로그 파일 위치

- **앱 로그**: `%USERPROFILE%\\Documents\\EyebottleRecorder\\logs\\`
- **녹음 파일**: 설정한 저장 폴더 (보통 OneDrive 하위)

## 🐛 문제 해결

### 일반적인 문제들

1. **마이크가 인식되지 않음**
   - Windows 설정 → 시스템 → 소리 → 입력에서 기본 장치 확인
   - 장치 관리자에서 오디오 드라이버 업데이트

2. **권한 오류**
   - Windows 설정 → 개인정보 → 마이크에서 앱 권한 확인
   - 관리자 권한으로 앱 재실행

3. **파일이 저장되지 않음**
   - 저장 폴더 경로 및 권한 확인
   - 디스크 공간 확인 (최소 1GB 여유 공간 필요)

4. **자동 녹음이 작동하지 않음**
   - 시스템 시간 확인
   - 스케줄 설정 재확인
   - Windows 절전 모드 설정 확인

## 📞 지원 연락처

**기술 지원**: eyebottle.kr
**문제 신고**: GitHub Issues
**긴급 연락**: [연락처 정보]

---

> 📝 **테스트 완료 후**: 결과를 정리하여 개발팀에 전달해주세요. 발견된 문제점과 개선 요청사항을 포함해주시면 다음 업데이트에 반영하겠습니다.